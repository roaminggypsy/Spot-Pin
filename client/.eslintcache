[{"/Users/lemonade/Documents/map/client/src/index.js":"1","/Users/lemonade/Documents/map/client/src/reportWebVitals.js":"2","/Users/lemonade/Documents/map/client/src/pages/Splash.js":"3","/Users/lemonade/Documents/map/client/src/pages/App.js":"4","/Users/lemonade/Documents/map/client/src/context.js":"5","/Users/lemonade/Documents/map/client/src/withRoot.js":"6","/Users/lemonade/Documents/map/client/src/components/Header.js":"7","/Users/lemonade/Documents/map/client/src/components/Map.js":"8","/Users/lemonade/Documents/map/client/src/components/Auth/Signout.js":"9","/Users/lemonade/Documents/map/client/src/components/Auth/Login.js":"10","/Users/lemonade/Documents/map/client/src/graphql/queries.js":"11","/Users/lemonade/Documents/map/client/src/ProtectedRoute.js":"12","/Users/lemonade/Documents/map/client/src/reducer.js":"13","/Users/lemonade/Documents/map/client/src/serviceWorker.js":"14","/Users/lemonade/Documents/map/client/src/components/PinIcon.js":"15","/Users/lemonade/Documents/map/client/src/components/Blog.js":"16","/Users/lemonade/Documents/map/client/src/components/Pin/NoContent.js":"17","/Users/lemonade/Documents/map/client/src/components/Pin/CreatePin.js":"18","/Users/lemonade/Documents/map/client/src/graphql/mutations.js":"19","/Users/lemonade/Documents/map/client/src/client.js":"20","/Users/lemonade/Documents/map/client/src/components/Pin/PinContent.js":"21","/Users/lemonade/Documents/map/client/src/components/Comment/Comments.js":"22","/Users/lemonade/Documents/map/client/src/components/Comment/CreateComment.js":"23"},{"size":1126,"mtime":1610605588607,"results":"24","hashOfConfig":"25"},{"size":362,"mtime":1610600239015,"results":"26","hashOfConfig":"25"},{"size":317,"mtime":1610605336390,"results":"27","hashOfConfig":"25"},{"size":260,"mtime":1610604920648,"results":"28","hashOfConfig":"25"},{"size":186,"mtime":1610781117452,"results":"29","hashOfConfig":"25"},{"size":1163,"mtime":1610604950864,"results":"30","hashOfConfig":"25"},{"size":1701,"mtime":1610604994370,"results":"31","hashOfConfig":"25"},{"size":5859,"mtime":1610833023100,"results":"32","hashOfConfig":"25"},{"size":1073,"mtime":1610605056847,"results":"33","hashOfConfig":"25"},{"size":1782,"mtime":1610753161108,"results":"34","hashOfConfig":"25"},{"size":396,"mtime":1610766864738,"results":"35","hashOfConfig":"25"},{"size":428,"mtime":1610605515999,"results":"36","hashOfConfig":"25"},{"size":1764,"mtime":1610855217140,"results":"37","hashOfConfig":"25"},{"size":4958,"mtime":1610605555309,"results":"38","hashOfConfig":"25"},{"size":209,"mtime":1610615424983,"results":"39","hashOfConfig":"25"},{"size":1100,"mtime":1610847772157,"results":"40","hashOfConfig":"25"},{"size":785,"mtime":1610681369730,"results":"41","hashOfConfig":"25"},{"size":4803,"mtime":1610775613242,"results":"42","hashOfConfig":"25"},{"size":1003,"mtime":1610855383314,"results":"43","hashOfConfig":"25"},{"size":568,"mtime":1610753347755,"results":"44","hashOfConfig":"25"},{"size":1788,"mtime":1610849903972,"results":"45","hashOfConfig":"25"},{"size":1423,"mtime":1610855856886,"results":"46","hashOfConfig":"25"},{"size":2015,"mtime":1610855282463,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"2qw5lp",{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"50"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"76","usedDeprecatedRules":"50"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"50"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"/Users/lemonade/Documents/map/client/src/index.js",[],["98","99"],"/Users/lemonade/Documents/map/client/src/reportWebVitals.js",[],"/Users/lemonade/Documents/map/client/src/pages/Splash.js",[],"/Users/lemonade/Documents/map/client/src/pages/App.js",[],"/Users/lemonade/Documents/map/client/src/context.js",[],"/Users/lemonade/Documents/map/client/src/withRoot.js",[],"/Users/lemonade/Documents/map/client/src/components/Header.js",[],"/Users/lemonade/Documents/map/client/src/components/Map.js",["100","101","102"],"import React, { useState, useEffect, useContext } from 'react';\nimport MapGL, { NavigationControl, Marker, Popup } from 'react-map-gl';\nimport { withStyles } from '@material-ui/core/styles';\nimport differenceInMinutes from 'date-fns/differenceInMinutes';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DeleteIcon from '@material-ui/icons/DeleteTwoTone';\nimport { useClient } from '../client';\nimport { GET_PINS_QUERY } from '../graphql/queries';\nimport { DELETE_PIN_MUTATION } from '../graphql/mutations';\nimport PinIcon from './PinIcon';\nimport Context from '../context';\nimport Blog from './Blog';\n\nconst INITIAL_VIEWPORT = {\n  latitude: 37.7577,\n  longitude: -122.4376,\n  zoom: 1,\n};\n\nconst Map = ({ classes }) => {\n  const client = useClient();\n  const { state, dispatch } = useContext(Context);\n  useEffect(() => {\n    getPins();\n  }, []);\n\n  const [viewport, setViewport] = useState({\n    latitude: 37.8,\n    longitude: -122.4,\n    zoom: 14,\n    bearing: 0,\n    pitch: 0,\n  });\n\n  const [userPos, setUserPos] = useState(null);\n\n  useEffect(() => {\n    getUserPos();\n  }, []);\n\n  const [popup, setPopup] = useState(null);\n\n  const getPins = async () => {\n    const { getPins } = await client.request(GET_PINS_QUERY);\n    dispatch({ type: 'GET_PINS', payload: getPins });\n    console.log({ getPins });\n  };\n\n  const getUserPos = () => {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        const { latitude, longitude } = position.coords;\n        setViewport({ ...viewport, latitude, longitude });\n        setUserPos({ latitude, longitude });\n      });\n    }\n  };\n\n  const handleMapClick = ({ lngLat, leftButton }) => {\n    if (!leftButton) {\n      return;\n    }\n    if (!state.draft) {\n      dispatch({ type: 'CREATE_DRAFT' });\n    }\n\n    const [longitude, latitude] = lngLat;\n    dispatch({\n      type: 'UPDATE_DRAFT_LOCATION',\n      payload: { longitude, latitude },\n    });\n  };\n\n  const highlightNewPin = (pin) => {\n    const isNewPin =\n      differenceInMinutes(Date.now(), Number(pin.createdAt)) <= 30;\n    return isNewPin ? 'limegreen' : 'darkblue';\n  };\n\n  const handleSelectPin = (pin) => {\n    setPopup(pin);\n\n    dispatch({ type: 'SET_PIN', payload: pin });\n  };\n\n  const handleDeletePin = async (pin) => {\n    const variables = { pinId: pin._id };\n    const { deletePin } = await client.request(DELETE_PIN_MUTATION, variables);\n    dispatch({ type: 'DELETE_PIN', payload: deletePin });\n    setPopup(null);\n  };\n\n  const isAuthUser = () => state.currentUser._id === popup.author._id;\n\n  return (\n    <div className={classes.root}>\n      <MapGL\n        {...viewport}\n        width='100vw'\n        height='100vh'\n        mapStyle='mapbox://styles/mapbox/dark-v9'\n        mapboxApiAccessToken='pk.eyJ1IjoibGlwYWR1cGEiLCJhIjoiY2tqd2YzbWQwMDk2cTJ5cGYwdGVnam5nYyJ9.J15bYPm3-NnsFxPXUCSJbw'\n        onViewportChange={(newViewport) => setViewport(newViewport)}\n        onClick={handleMapClick}\n      >\n        {/* /Navigation Control */}\n        <div className={classes.navigationControl}>\n          <NavigationControl\n            onViewportChange={(newViewport) => setViewport(newViewport)}\n          />\n        </div>\n\n        {/* Pin for User's Current Pos */}\n        {userPos && (\n          <Marker\n            latitude={userPos.latitude}\n            longitude={userPos.longitude}\n            offsetLeft={-19}\n            offsetTop={-37}\n          >\n            <PinIcon size={40} color='red' />\n          </Marker>\n        )}\n\n        {/* Draft Pin */}\n        {state.draft && (\n          <Marker\n            latitude={state.draft.latitude}\n            longitude={state.draft.longitude}\n            offsetLeft={-19}\n            offsetTop={-37}\n          >\n            <PinIcon size={40} color='hotpink' />\n          </Marker>\n        )}\n\n        {/* Created Pins */}\n        {state.pins.map((pin) => (\n          <Marker\n            key={pin._id}\n            latitude={pin.latitude}\n            longitude={pin.longitude}\n            offsetLeft={-19}\n            offsetTop={-37}\n          >\n            <PinIcon\n              onClick={() => {\n                // onClick param is eventt\n                handleSelectPin(pin);\n              }}\n              size={40}\n              color={highlightNewPin(pin)}\n            />\n          </Marker>\n        ))}\n\n        {/* Popup Dialog for CreatedPins */}\n        {popup && (\n          <Popup\n            anchor='top'\n            latitude={popup.latitude}\n            longitude={popup.longitude}\n            closeOnClick={false}\n            onClose={() => setPopup(null)}\n          >\n            <img\n              className={classes.popupImage}\n              src={popup.image}\n              alt={popup.title}\n            />\n            <div className={classes.popupTab}>\n              <Typography>\n                {popup.latitude.toFixed(6)}, {popup.longitude.toFixed(6)}\n              </Typography>\n              {isAuthUser() && (\n                <Button onClick={() => handleDeletePin(popup)}>\n                  <DeleteIcon className={classes.deleteIcon} />\n                </Button>\n              )}\n            </div>\n          </Popup>\n        )}\n      </MapGL>\n\n      {/* Blog Area to add Pin Content*/}\n      <Blog />\n    </div>\n  );\n};\n\nconst styles = {\n  root: {\n    display: 'flex',\n  },\n  rootMobile: {\n    display: 'flex',\n    flexDirection: 'column-reverse',\n  },\n  navigationControl: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    margin: '1em',\n  },\n  deleteIcon: {\n    color: 'red',\n  },\n  popupImage: {\n    padding: '0.4em',\n    height: 200,\n    width: 200,\n    objectFit: 'cover',\n  },\n  popupTab: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'column',\n  },\n};\n\nexport default withStyles(styles)(Map);\n","/Users/lemonade/Documents/map/client/src/components/Auth/Signout.js",[],"/Users/lemonade/Documents/map/client/src/components/Auth/Login.js",[],"/Users/lemonade/Documents/map/client/src/graphql/queries.js",[],"/Users/lemonade/Documents/map/client/src/ProtectedRoute.js",[],"/Users/lemonade/Documents/map/client/src/reducer.js",["103"],"export default function reducer(state, { type, payload }) {\n  switch (type) {\n    case 'LOGIN_USER':\n      return {\n        ...state,\n        currentUser: payload,\n      };\n    case 'IS_LOGGED_IN':\n      return {\n        ...state,\n        isAuth: payload,\n      };\n    case 'SIGNOUT_USER':\n      return {\n        ...state,\n        isAuth: false,\n        currentUser: null,\n      };\n    case 'CREATE_DRAFT':\n      return {\n        ...state,\n        currentPin: null,\n        draft: {\n          latitude: 0,\n          longitude: 0,\n        },\n      };\n    case 'DELETE_DRAFT':\n      return {\n        ...state,\n        draft: null,\n      };\n    case 'UPDATE_DRAFT_LOCATION':\n      return {\n        ...state,\n        draft: payload,\n      };\n    case 'GET_PINS':\n      console.log(payload);\n      return {\n        ...state,\n        pins: payload,\n      };\n    case 'CREATE_PIN':\n      const newPin = payload;\n      const prevPins = state.pins.filter((pin) => pin._id !== newPin._id);\n      return {\n        ...state,\n        pins: [...prevPins, newPin],\n      };\n    case 'SET_PIN':\n      return {\n        ...state,\n        currentPin: payload,\n        draft: null,\n      };\n    case 'DELETE_PIN':\n      const deletedPin = payload;\n      const filteredPins = state.pins.filter(\n        (pin) => pin._id !== deletedPin._id\n      );\n      return {\n        ...state,\n        pins: filteredPins,\n        currentPin: null,\n      };\n    case 'CREATE_COMMENT':\n      const updatedCurrentPin = payload;\n      const updatedPins = state.pins.map((pin) =>\n        pin._id == updatedCurrentPin._id ? updatedCurrentPin : pin\n      );\n      return {\n        ...state,\n        pins: updatedPins,\n        currentPin: updatedCurrentPin,\n      };\n    default:\n      return state;\n  }\n}\n","/Users/lemonade/Documents/map/client/src/serviceWorker.js",[],"/Users/lemonade/Documents/map/client/src/components/PinIcon.js",["104"],"import React from 'react';\nimport PlaceTwoTone from '@material-ui/icons/PlaceTwoTone';\n\nexport default ({ size, color, onClick }) => (\n  <PlaceTwoTone onClick={onClick} style={{ fontSize: size, color }} />\n);\n","/Users/lemonade/Documents/map/client/src/components/Blog.js",[],"/Users/lemonade/Documents/map/client/src/components/Pin/NoContent.js",[],"/Users/lemonade/Documents/map/client/src/components/Pin/CreatePin.js",[],"/Users/lemonade/Documents/map/client/src/graphql/mutations.js",[],"/Users/lemonade/Documents/map/client/src/client.js",[],"/Users/lemonade/Documents/map/client/src/components/Pin/PinContent.js",[],"/Users/lemonade/Documents/map/client/src/components/Comment/Comments.js",[],"/Users/lemonade/Documents/map/client/src/components/Comment/CreateComment.js",[],{"ruleId":"105","replacedBy":"106"},{"ruleId":"107","replacedBy":"108"},{"ruleId":"109","severity":1,"message":"110","line":15,"column":7,"nodeType":"111","messageId":"112","endLine":15,"endColumn":23},{"ruleId":"113","severity":1,"message":"114","line":26,"column":6,"nodeType":"115","endLine":26,"endColumn":8,"suggestions":"116"},{"ruleId":"113","severity":1,"message":"117","line":40,"column":6,"nodeType":"115","endLine":40,"endColumn":8,"suggestions":"118"},{"ruleId":"119","severity":1,"message":"120","line":70,"column":17,"nodeType":"121","messageId":"122","endLine":70,"endColumn":19},{"ruleId":"123","severity":1,"message":"124","line":4,"column":1,"nodeType":"125","endLine":6,"endColumn":3},"no-native-reassign",["126"],"no-negated-in-lhs",["127"],"no-unused-vars","'INITIAL_VIEWPORT' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getPins'. Either include it or remove the dependency array.","ArrayExpression",["128"],"React Hook useEffect has a missing dependency: 'getUserPos'. Either include it or remove the dependency array.",["129"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","no-global-assign","no-unsafe-negation",{"desc":"130","fix":"131"},{"desc":"132","fix":"133"},"Update the dependencies array to be: [getPins]",{"range":"134","text":"135"},"Update the dependencies array to be: [getUserPos]",{"range":"136","text":"137"},[902,904],"[getPins]",[1139,1141],"[getUserPos]"]